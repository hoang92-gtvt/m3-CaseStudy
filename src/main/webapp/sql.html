<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>





</body>
</html>

create DATABASE LibraryManager;
use LibraryManager;

create table users(
id int primary key  auto_increment,
name varchar(100) not null,
birthday datetime not null,
email varchar(100) not null unique,
phone varchar(15) not null unique ,
urlOfImage varchar(200),

userName varchar(100) not null unique,
pass varchar(50) not null unique,

role_id int not null,
foreign key (role_id) references role(id)

);
drop table users;

alter table users
add column userName varchar(100) not null unique,
add column pass varchar(50) not null unique;

drop table users;

create table role(
id int primary key auto_increment,
name varchar(30) not null

);


create table book(
id int primary key  auto_increment,
name varchar(50) not null ,
description varchar(200) ,
status_id int not null,
nxb_id int not null,
foreign key (nxb_id) references NXB(id),
foreign key (status_id) references statusBook(id)

);
drop table book;

create table statusBook(
id int primary key,
name varchar(50)
);

create table NXB(
id int primary key auto_increment,
name varchar(100) not null unique

);
create table category(
id int primary key auto_increment,
name varchar(100) not null unique
);

create table book_category(
book_id int not null,
category_id int not null,
foreign key (book_id) references book(id),
foreign key (category_id) references category(id),

primary key (book_id, category_id)

);
# drop table book_category;



create table PhieuMuon(
id int primary key  auto_increment,
identity varchar(20) not null unique,
date datetime,
duedate date,
user_id int not null,
foreign key (user_id ) references users(id),
statusPM_id int not null,
foreign key (statusPM_id) references statusPM(id)

);
drop table PhieuMuon;

# alter table PhieuMuon
# add column duedate date  ;

create table statusPM(
id int primary key ,
name varchar(50)
);

create table DetailPM(
id int primary key auto_increment,
PM_identity int not null unique ,
foreign key (PM_identity) references PhieuMuon(id),
book_id int not null unique,
foreign key (book_id) references book(id),
amount int not null

);
# drop table DetailPM;
